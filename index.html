<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Plantillas Whatsapp</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital@0;1&display=swap" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    
</head>

  <body>
    <main class="m-6 ">

      <section id="header_section" class="w-full font-bold bg-[#343434] text-xl text-white py-3 px-4 flex justify-between align-center">
        <h1>Gestor de Plantillas Whattsap</h1>
      </section>
      <section id="body_section" class="bg-[#fbfbfb] flex flex-col md:flex-row">
      
        <section class="md:w-1/3 rounded my-4 mx-2 p-1 flex flex-col gap-3">
              <!-- Contenedor principal de botones Nueva Plantilla,Eliminar Todas y Solo Favoritos -->
              <section class="flex gap-2">
                <button id="btn-nuevaPlantilla" type="button" onclick="modalCreateTemplate()" class="basis-full p-2 bg-[#6B8E23] text-white rounded-lg font-bold hover:bg-[#556B2F] flex justify-center align-center gap-2">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="white" class="size-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                  </svg>
                  <span>Nueva Plantilla</span>
                </button>
                <button type="button"  class="hover:bg-gray-200 rounded-lg p-1" onclick="clearAll()" title="Eliminar Todo">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" stroke-width="2" stroke="#FF4500" class="size-7">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                  </svg>
                </button>
                <button type="button" id="btn-favorites" class="hover:bg-gray-200 rounded-lg p-1" title="Mostrar solo favoritos">
                  <svg id="icon-solo-favorite" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="#6c6c6c" class="size-7">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z" />
                  </svg>          
                </button>
              </section>

              <!-- Contenedor principal de filtros -->
              <section class="filters-container bg-gray-100 p-4 ">
                <div class="flex justify-between items-center mb-4">
                  <h3 class="text-lg font-bold flex">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75" />
                    </svg><span>Filtros</span>
                  </h3>
                  <!-- Botón para remover todos los filtros -->
                  <button id="reset-filter"  style="display: none;" title="Remover Filtros">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="#FF4500" class="size-7">
                      <path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                    </svg>
                  </button>
                </div>
                
                
                <!-- Filtro de título -->
                <div class="mb-4">
                  <label for="filter-title" class="block text-sm font-bold text-gray-700 mb-1">Título</label>
                  <input type="text" id="filter-title" class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-300" placeholder="Buscar por título">
                </div>
                
                <!-- Filtro de hashtags -->
                <div class="mb-4">
                  <label for="filter-hashtags" class="block text-sm font-bold text-gray-700 mb-1">Hashtags</label>
                  <input type="text" id="filter-hashtags" class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-300" placeholder="Buscar por hashtags">
                  <p class="text-xs text-gray-500 mt-1"><span class="font-bold text-[#FF4500]">*</span> Para más de un hashtag, sepáralos por comas</p>
                </div>
                
                <!-- Filtro de mensaje -->
                <div class="mb-4">
                  <label for="filter-message" class="block text-sm font-bold text-gray-700 mb-1">Mensaje</label>
                  <input type="text" id="filter-message" class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-300" placeholder="Buscar por mensaje">
                </div>
                
                <!-- Botón de aplicar filtro -->
                <button id="apply-filter" class="w-full bg-[#1A4A6E] hover:bg-[#243A5E] text-white font-bold py-2 px-4 rounded flex justify-center gap-2 transition-colors">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z" />
                  </svg>                  
                  <span>Aplicar Filtro</span> 
                </button>
              </section>
        </section>

        <section class="p-2 md:p-4 w-full md:w-2/3 flex flex-col">
            <section class="flex flex-wrap items-center justify-between border-b mb:mt-2 px-2 border-gray-300 pb-2 mb-4">
              <!-- Contador -->
              <p id="template-count" class="text-gray-500 text-mb font-semibold">
                0 Resultados en Plantillas
              </p>
          
            </section>
          
            <ul
              id="templates-container"
              class="grid gap-2 md:gap-5 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 auto-rows-fr w-full h-full"
            ></ul>
        </section>
      </section>
      

    <!-- Modal reutilizable para crear/editar plantillas -->
<div id="modal-plantilla" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50">
  <div class="bg-white rounded-xl shadow-lg w-full max-w-xl p-6">
    <h2 id="modal-titulo" class="text-2xl font-bold text-center mb-4">Nueva Plantilla</h2>
    <form id="form-plantilla" class="flex flex-col gap-3">
      <!-- Título -->
      <label>
        <span class="block mb-1 font-bold">Título</span>
        <input type="text" id="title-input" class="w-full p-2 border rounded" placeholder="Título" required>
      </label>

      <!-- Mensaje -->
      <label>
        <span class="block mb-1 font-bold">Mensaje</span>
        <textarea id="message-input" class="w-full p-2 border rounded" placeholder="Mensaje" required></textarea>
      </label>

      <!-- Hashtags -->
      <div class="flex items-center">
        <label class="block w-auto mb-2 font-bold">Hashtags</label>
        <div id="buttons-container" class="flex-1 flex gap-1 justify-end">
          <button type="button" onclick="addHashtag()" title="Adicionar otro hashtag">
            <svg xmlns="http://www.w3.org/2000/svg"viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke="#6B8E23" class="size-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
            </svg>                        
          </button>
          <button type="button" onclick="removeHashtag()" title="Eliminar hashtag">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#FF4500" class="size-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
            </svg>                        
          </button>
        </div>
      </div>


      <div id="hashtag-container" class="space-y-2">
        <div class="flex space-x-2">
          <input type="text" class="hashtag-input flex-1 p-2 border rounded" placeholder="Hashtag (sin #)" required>
        </div>
      </div>

      <!-- Link -->
      <label>
        <span class="block mt-2 mb-1 font-bold">Link</span>
        <input id="link-input" type="url" class="w-full p-2 border rounded" placeholder="https://ejemplo.com" required>
      </label>

      <!-- Botones -->
      <div class="flex justify-end gap-3 mt-4">
        <button type="button" onclick="cerrarModalPlantilla()" class="px-4 py-2 border bg-[#FF4500] text-white rounded hover:bg-red-500 font-bold">Cancelar</button>
        <button id="btn-submit" type="submit" class="px-4 py-2 rounded bg-[#6B8E23] text-white hover:bg-[#556B2F] font-bold">Guardar</button>
      </div>
    </form>
  </div>
</div>


    <!-- Modal reutilizable para eliminar plantillas -->
      <div id="modal-confirmacion" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-2xl shadow-xl w-full max-w-md p-6 space-y-4 text-center">
          <h2 class="text-xl font-bold text-gray-800" id="modal-titulo">¿Estás seguro?</h2>
          <p class="text-gray-600" id="modal-mensaje">Esta acción no se puede deshacer.</p>
      
          <div class="flex justify-center gap-4 mt-6">
            <button id="btn-cancelar" class="px-4 py-2 border text-gray-800 rounded hover:bg-gray-200">
              Cancelar
            </button>
            <button id="btn-confirmar" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
              Eliminar
            </button>
          </div>
        </div>
      </div>

    </main>
    <footer></footer>
    <script src="./js/models/Template.js"></script>
    <script src="./js/notification.js"></script>
    <script src="./js/modal.js"></script>
    <script src="./js/store.js"></script>
    <script src="./js/persistence.js"></script>
    <script src="./js/filtermanager.js"></script>
    <script src="./js/app.js"></script>
  </body>
</html>